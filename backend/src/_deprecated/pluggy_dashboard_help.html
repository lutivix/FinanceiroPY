<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pluggy - Conectar Conta</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-top: 0;
        }
        .info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #2196F3;
            margin: 20px 0;
        }
        .error {
            background: #ffebee;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #f44336;
            margin: 20px 0;
        }
        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .result {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            display: none;
        }
        .item-id {
            font-size: 18px;
            font-weight: bold;
            color: #4CAF50;
            font-family: 'Courier New', monospace;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 4px;
            margin: 10px 0;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>üîå Pluggy - Conectar Conta Banc√°ria</h1>
        
        <div class="error">
            <h3>‚ùå Limita√ß√£o do Plano Sandbox/Free</h3>
            <p>O plano gratuito da Pluggy <strong>N√ÉO permite</strong>:</p>
            <ul>
                <li>Criar items via API backend (Python/Node/etc)</li>
                <li>Listar items via c√≥digo</li>
                <li>Acesso program√°tico direto aos recursos</li>
            </ul>
            <p><strong>APENAS permite</strong>: Conectar contas via Pluggy Connect Widget no Dashboard web</p>
        </div>

        <div class="info">
            <h3>‚úÖ Solu√ß√£o: Use o Dashboard Oficial</h3>
            <p><strong>Passo a passo:</strong></p>
            <ol>
                <li>Acesse: <a href="https://dashboard.pluggy.ai/" target="_blank">https://dashboard.pluggy.ai/</a></li>
                <li>Fa√ßa login com sua conta</li>
                <li>V√° em <strong>"Connect"</strong> ou <strong>"Test Widget"</strong></li>
                <li>Conecte sua conta (Mercado Pago, Nubank, ou Pluggy Bank de teste)</li>
                <li>Ap√≥s conectar, v√° em <strong>"Items"</strong></li>
                <li>Copie o <strong>Item ID</strong> da conta conectada</li>
                <li>Cole o ID aqui embaixo üëá</li>
            </ol>
        </div>

        <h3>üìã Cole o Item ID aqui:</h3>
        <input type="text" id="itemId" placeholder="Ex: 550e8400-e29b-41d4-a716-446655440000" 
               style="width: 100%; padding: 10px; font-family: monospace; font-size: 14px; border: 2px solid #ddd; border-radius: 4px;">
        <br><br>
        <button onclick="saveItemId()" style="background: #4CAF50; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px;">
            üíæ Salvar Item ID
        </button>

        <div id="result" class="result">
            <h3>‚úÖ Item ID Salvo!</h3>
            <div class="item-id" id="savedId"></div>
            <p>Agora execute o script Python para buscar as transa√ß√µes:</p>
            <code>py testar_item_pluggy.py</code>
        </div>
    </div>

    <script>
        function saveItemId() {
            const itemId = document.getElementById('itemId').value.trim();
            if (!itemId) {
                alert('‚ùå Digite o Item ID!');
                return;
            }
            
            // Validar formato UUID
            const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
            if (!uuidRegex.test(itemId)) {
                alert('‚ùå Item ID inv√°lido! Deve ser um UUID no formato: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx');
                return;
            }
            
            // Salvar no localStorage
            localStorage.setItem('pluggy_item_id', itemId);
            
            // Exibir resultado
            document.getElementById('savedId').textContent = itemId;
            document.getElementById('result').style.display = 'block';
            
            // Criar arquivo Python com o ID
            const pythonCode = `# Item ID obtido via Dashboard Pluggy\nITEM_ID = "${itemId}"`;
            console.log('Copie este c√≥digo para item_id.py:');
            console.log(pythonCode);
        }
    </script>
</body>
</html>
